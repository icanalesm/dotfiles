################################################################################
# Server
################################################################################

# Set default $TERM
if-shell "[ \"$TERM\" = \"linux\" ]"\
         "set -g default-terminal \"linux\""\
         "set -g default-terminal \"tmux-256color\""

# Delay between prefix and command
set -g escape-time 1

################################################################################
# Sessions
################################################################################

# Start non-login shell
set -g default-command "/bin/bash --rcfile ${HOME}/.config/bash/bashrc"

# Disable mouse support
set -g mouse off

# Indices for windows start at 1
set -g base-index 1

# Renumber windows when one is closed
set -g renumber-windows on

# Remap prefix from 'C-b' to 'C-a'
set -g prefix C-a
unbind C-b
bind C-a send-prefix

# Reload tmux configuration 
bind C-r source-file "${HOME}/.config/tmux/tmux.conf" \; display "Configuration reloaded!"

# Create session
bind C new-session

# Rename session
unbind "\$"
bind R command-prompt -I "#{session_name}" "rename-session '%%'"

# Switch sessions
unbind s
unbind (
unbind )
bind S choose-tree -Zs
bind P switch-client -p
bind N switch-client -n

################################################################################
# Windows
################################################################################

# Indices for panes start at 1
set -g pane-base-index 1

# Monitor for activity in windows
set -g monitor-activity on

# Create window
bind c new-window

# Rename window
unbind ,
bind r command-prompt -I "#{window_name}" "rename-window '%%'" 

# Switch windows
unbind w
bind s choose-tree -Zw
bind p previous-window
bind n next-window

# Tiled layout
bind t select-layout tiled

################################################################################
# Panes
################################################################################

# Toggle print to all panes in a window at once
bind a set synchronize-panes

# Create pane
unbind %
bind | split-window -h -c '#{pane_current_path}'
unbind '"'
bind - split-window -v -c '#{pane_current_path}'

# Switch panes
unbind Left
unbind Down
unbind Up
unbind Right
bind -r h select-pane -L
bind -r j select-pane -D
bind -r k select-pane -U
bind -r l select-pane -R

# Resize pane
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# Swap pane
unbind '{'
unbind '}'
bind -r < swap-pane -U
bind -r > swap-pane -D

################################################################################
# Copy mode
################################################################################

# Use vi-style key bindings
set -g mode-keys vi

# Vim-style copying
bind -T copy-mode-vi v send-keys -X begin-selection
bind -T copy-mode-vi C-v send-keys -X rectangle-toggle
bind -T copy-mode-vi y send-keys -X copy-selection-and-cancel

# Search
bind / copy-mode \; send-key ?

################################################################################
# Status bar
################################################################################

%if #{BASE16_THEME}
    source-file "${HOME}/.config/tmux/tinted-tmux/colors/base16-${BASE16_THEME}.conf"
%endif

set -g status-position bottom
set -g status-justify left
set -g status-interval 0

# Format - left/right status
set -g status-left ''
set -g status-left-length 0
set -g status-right '#S @ #H'
set -g status-right-length 50

# Format - windows
set -g window-status-format ' #I:#W#F '
set -g window-status-current-format ' #I:#W#F '

